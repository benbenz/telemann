{% load static i18n crispy_forms_tags random %}

<h2 class="text-lg mb-2 text-center">Bank: {{ bank_msb }}{% if source.midi_bank_use_lsb %}:{{bank_lsb}}{% endif %} Program: {{ program }}</h2>

<div class="soundcontrols">
    <div class="soundcontrol prevsound"><i class="fa-solid fa-circle-left"></i></div>
    <div class="soundcontrol audio">
        <audio autoplay="true" loop controls>
            <source id="audioSource" type="audio/wav" src="{% url 'sounds:render_sound' srcid=source.id %}?bm={{bank_msb}}&bl={{bank_lsb}}&p={{program}}&r={% random_uuid %}"></source>
        </audio>
    </div>
    <div class="soundcontrol reverse nextsound"><i class="fa-solid fa-circle-right"></i></div>
</div>
<script src="{% static 'js/sound.js' %}" type="text/javascript"></script>
<script type="text/javascript">
var bank_msb = {{bank_msb}};
var bank_lsb = {{bank_lsb}};
var program = {{program}};
var category = {% if my_value %}"{{category}}"{% else %}null{% endif %};
</script>

<div class="form">
  <form method="post" id="soundtone_form">{% csrf_token %}
    {{ form|crispy }}
    <div class="form-buttons">
    <button type="submit" class="form-button soundtone flex px-4 py-2 mt-2 rounded-lg md:mt-0 focus:outline-none focus:shadow-outline">Save</button>
  </div>
  </form>
</div>
